# 學生成績分析 App 全面優化計畫

## 目標
- 提升資料分析的專業性與實用性
- 優化使用者體驗，讓操作更直覺、清楚
- 提供有助於判斷學生未來學習的關鍵分析指標

---

## 一、主要工作項目與優先順序

### 1. UI/UX 架構重整（高優先）
- [✔] 規劃首頁儀表板（Dashboard）
- [✔] 設計分頁式分析（Tabs：總覽、分群、趨勢、預測等）
- [✔] Sidebar 篩選區分區明確（學校、年級、檢測名稱、分群）
- [✔] 篩選選單優化（可搜尋、排序、全選/全不選、分群選擇）

### 2. 分析指標與功能強化（高優先）
- [✔] 分數分布分析（平均、標準差、及格率、分布圖）
- [✔] 趨勢分析（多次檢測/歷屆成績變化）
- [✔] 分群分析（自動將檢測/學生分層，KMeans等）
- [✔] 相關性分析（不同檢測/科目間分數關聯）
- [✔] 預測分析（學習風險預警、未來表現預測）

### 3. 分析結果說明與教育意義（中優先）
- [->] 每個分析區塊加上「指標說明」與「解讀建議」（**利用 Gemini API 產生客製化建議**）
- [->] 提供個人化學習建議（針對低分/高分學生）（**利用 Gemini API 產生**）

### 4. 互動式圖表與視覺化（中優先）
- [✔] 使用 Plotly/Altair 等互動圖表
- [ ] 支援圖表點擊、縮放、細節顯示

### 5. 程式碼結構優化與模組化（低優先）
- [✔] 將 sidebar、主頁、分析分頁、指標說明等模組化
- [✔] 增加註解與說明文件

---

## 二、詳細步驟與進度勾選表

| 步驟 | 工作內容 | 優先順序 | 完成狀態 |
|------|----------|----------|----------|
| 1 | 規劃首頁儀表板（Dashboard） | 高 | [✔] |
| 2 | 設計分頁式分析（Tabs） | 高 | [✔] |
| 3 | Sidebar 篩選區分區明確 | 高 | [✔] |
| 4 | 篩選選單優化（可搜尋、排序、全選/全不選、分群選擇） | 高 | [✔] |
| 5 | 分數分布分析（平均、標準差、及格率、分布圖） | 高 | [✔] |
| 6 | 趨勢分析（多次檢測/歷屆成績變化） | 高 | [✔] |
| 7 | 分群分析（自動分層，KMeans等） | 高 | [✔] |
| 8 | 相關性分析（不同檢測/科目間分數關聯） | 高 | [✔] |
| 9 | 預測分析（學習風險預警、未來表現預測） | 高 | [✔] |
| 10 | 每個分析區塊加上「指標說明」與「解讀建議」 (**利用 Gemini API**) | 中 | [✔] |
| 11 | 個人化學習建議（針對低分/高分學生） (**利用 Gemini API**) | 中 | [✔] |
| 12 | 互動式圖表（Plotly/Altair） | 中 | [✔] |
| 13 | 程式碼結構優化與模組化 | 低 | [✔] |
| 14 | 增加註解與說明文件 | 低 | [✔] |

---

## 三、建議執行順序

1. UI/UX 架構重整（步驟1~4）
2. 分析指標與功能強化（步驟5~9）
3. 分析說明與個人化建議（步驟10~11）
4. 互動式圖表（步驟12）
5. 程式碼結構優化（步驟13~14）

---

## 四、進度追蹤建議

- 每完成一項，將「完成狀態」由 [ ] 改為 [✔]
- 可每週檢視進度，調整優先順序與細節 

---

## 五、本次優化紀錄

- 2024/06/10：
    - 各分析分頁「指標說明」與「解讀建議」改為動態產生（模擬 Gemini API 回傳內容）。
    - 分群分析、預測分析區塊，針對高分/低分學生顯示個人化建議。
    - 預留 Gemini API 介接點，未來可直接串接真實 API。
- 2024/06/11：
    - 分數分布分析、成績分布與趨勢、成績分群分析等分頁，加入 Plotly 互動式圖表，支援互動直方圖與箱型圖。
- 2024/06/12：
    - 將 sidebar 篩選區程式碼抽出為 modules/sidebar.py，主程式以 sidebar_filters(df) 呼叫，提升可讀性與維護性。
    - 將 Dashboard 主頁與分數分布分析分頁抽出為 modules/dashboard.py、modules/score_distribution.py，主程式分頁以 dashboard_tab(df)、score_distribution_tab(df, ...) 呼叫。
    - 將所有分析分頁（通過率、趨勢、分群、預測等）全部模組化，主程式僅負責分頁調度與資料流轉，程式結構大幅優化。
- 2024/06/13：
    - 強化所有分頁的 Plotly 互動圖表，hover 顯示分數區間、分群、學生人數等細節，支援縮放與細節查詢。
    - Dashboard 改用 Plotly 互動直方圖。
    - 時間序列分析新增 Plotly 互動折線圖，支援群組 hover 與縮放。
    - 為主要分析模組（Dashboard、分數分布、分群、趨勢、時間序列、自動分群）補充完整 docstring 與 inline 註解，說明每個 function 的用途、參數、回傳值與關鍵邏輯，提升可讀性與維護性。 